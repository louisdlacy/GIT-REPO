# World Class

Represents a virtual world in Meta Horizon Worlds, which provides access to properties, events, and operations related to the world state; including events scripts can use to time operations based on state changes to the world.

## Signature

```typescript
export declare class World
```

## Properties

| Property | Description |
| --- | --- |
| `id` | Returns the current world ID.<br/>**Signature:** `id: ReadableHorizonProperty<bigint>;` |
| `leaderboards` | The leaderboards for the players in the world.<br/>**Signature:** `leaderboards: ILeaderboards;` |
| `matchmaking` | The matchmaking system for queueing players into the world.<br/>**Signature:** `matchmaking: { allowPlayerJoin(allow: boolean): Promise<void>; };`<br/>**Remarks:** allowPlayerJoin - Indicates whether players can join the world. |
| `name` | The human-readable name of the world.<br/>**Signature:** `name: ReadableHorizonProperty<string>;` |
| `onPrePhysicsUpdate` static [readonly] | An event that broadcasts on every rendered frame before the physics engine updates the world state. This event is especially useful for timing animations and entity locations before physics calculations are performed.<br/>**Signature:** `static readonly onPrePhysicsUpdate: LocalEvent<{ deltaTime: number; }>;`<br/>**Remarks:** The World.onPrePhysicsUpdate event provides similar functionality, but after the physics engine performs calculations. For more information about subscribing to world update events, see the World Update Events guide. |
| `onUpdate` static [readonly] | An event that broadcasts on every rendered frame in the world, allowing synchronization between the state of the world and the rendering pipeline. You can use this event to time animations, physics, and entity transforms for optimal performance.<br/>**Signature:** `static readonly onUpdate: LocalEvent<{ deltaTime: number; }>;`<br/>**Remarks:** By subscribing to this event, a script can perform operations during the world update loop, such as spawning an asset. The World.onPrePhysicsUpdate event provides similar functionality, but before the physics engine performs calculations. For more information about subscribing to world update events, see the World Update Events guide. |
| `persistentStorage` | A persistent storage object, which contains a set of functions that interact with player variables. For information about using player variables, see the Persistent Variables guide.<br/>**Signature:** `persistentStorage: IPersistentStorage;` |
| `persistentStorageWorld` | A persistent storage object, which contains a set of functions that interact with player variables.<br/>**Signature:** `persistentStorageWorld: IPersistentStorageWorld;` |
| `team` | Basic functions for teams based gameplay.<br/>**Signature:** `team: ITeam;`<br/>**Remarks:** In horizon, every world comes with a team management logic. Players, at any moment during their session, can join, leave or change teams at will. But a player can only be in one team of a given team group. Team groups are ways to separate teams in different sets. This allows the creation of multiple gameplay bubbles with their own teams in one single world. |
| `ui` | Basic UI functions for displaying popups and tooltips.<br/>**Signature:** `ui: IUI;`<br/>**Remarks:** For an example, see the Lobby tutorial. |

## Methods

| Method | Description |
| --- | --- |
| `deleteAsset(entity, fullDelete)` | Removes a previously spawned asset from the world.<br/>**Signature:** `deleteAsset(entity: Entity, fullDelete?: boolean): Promise<undefined>;`<br/>**Parameters:** entity: Entity - The previously spawned entity. fullDelete: boolean (Optional) - if true, the entity must be the root object, thus deleting all sub-objects.<br/>**Returns:** Promise<undefined> - A promise that resolves when the entity has been deleted. |
| `findEntities(name, options)` | Finds entities by their names.<br/>**Signature:** `findEntities(name: string, options?: FindEntitiesOptions): Entity[];`<br/>**Parameters:** name: string - The name of the entities to find, case sensitive. Must not be empty. If empty, will log an error. options: FindEntitiesOptions (Optional) - Options for the World.findEntities() method.<br/>**Returns:** Entity[] - An array of all of the entities matching the string and operation. If no entities are found, the array will be empty. |
| `findEntity(name)` | Finds an entity by its name.<br/>**Signature:** `findEntity(name: string): Entity \| undefined;`<br/>**Parameters:** name: string - The name of the entity to find, case sensitive. Must not be empty<br/>**Returns:** Entity \| undefined - The entity with the specified name, or undefined if no such entity exists.<br/>**Remarks:** For performance reasons do not do this in the update loop. Best used in start and cache the result. If there are multiple entities with the same name, will log an error and return undefined. |
| `getEntitiesWithTags(tags, matchOperation)` | Gets all world entities containing the provided tags using the provided match operation.<br/>**Signature:** `getEntitiesWithTags(tags: string[], matchOperation?: EntityTagMatchOperation): Entity[];`<br/>**Parameters:** tags: string[] - An array of tag names to match against. The comparison is case sensitive. matchOperation: EntityTagMatchOperation (Optional) - The match operation to run when searching for entities with given tags. Defaults to EntityTagMatchOperation.HasAnyExact.<br/>**Returns:** Entity[] - An array of all of the entities matching the tags and operation. |
| `getLocalPlayer()` | Gets the player corresponding to the local Meta Horizon Worlds client running on the player's machine where this script is currently executing.<br/>**Signature:** `getLocalPlayer(): Player;`<br/>**Returns:** Player - The local player.<br/>**Remarks:** This is particularly useful for Local Scripting to figure out which player's machine a local script is executing on. Note that if the local script is executing on the server, this will return the server player. |
| `getPlayerFromIndex(playerIndex)` | Gets the Player object for the given player index.<br/>**Signature:** `getPlayerFromIndex(playerIndex: number): Player \| null;`<br/>**Parameters:** playerIndex: number - The index of the player. Retrievable with the Player.index property.<br/>**Returns:** Player \| null - The player corresponding to that index, or null if no player exists at the index. |
| `getPlayers()` | Gets all players currently in the world, not including the server player.<br/>**Signature:** `getPlayers(): Player[];`<br/>**Returns:** Player[] - An array of Player objects in the world. |
| `getServerPlayer()` | Gets the player corresponding to the server's Meta Horizon Worlds client.<br/>**Signature:** `getServerPlayer(): Player;`<br/>**Returns:** Player - The server player.<br/>**Remarks:** This is particularly useful for Local Scripting to figure out if a script is executing on some client other than the server. Note that a server player is not physically present in the world and does not support a number of standard features (such as name.get() or being moved) that normal players do. |
| `reset()` | Resets the world's state. This sets all entities back to their initial position, cancels all event and event listeners, and restarts scripts in the world.<br/>**Signature:** `reset(): void;`<br/>**Returns:** void |
| `setShopOverlayVisible(player, shopGizmo, visible)` | Changes the visible state of a shop configured as an overlay element<br/>**Signature:** `setShopOverlayVisible(player: Player, shopGizmo: Entity, visible: boolean): Promise<void>;`<br/>**Parameters:** player: Player - the player who will be seeing the shop overlay change state shopGizmo: Entity - the entity Gizmo of the shop visible: boolean - the new state to set to the shop<br/>**Returns:** Promise<void> |
| `spawnAsset(asset, position, rotation, scale)` | Asynchronously spawns an asset.<br/>**Signature:** `spawnAsset(asset: Asset, position: Vec3, rotation?: Quaternion, scale?: Vec3): Promise<Entity[]>;`<br/>**Parameters:** asset: Asset - The asset to spawn. position: Vec3 - The position where the asset is spawned. rotation: Quaternion (Optional) - The rotation of the spawned asset. If invalid, is replace with Quaternion.one (no rotation). scale: Vec3 (Optional) - The scale of the spawned asset.<br/>**Returns:** Promise<Entity[]> - A promise resolving to all of the root entities within the asset. |
| `toString()` | Creates a string representation of the World object.<br/>**Signature:** `toString(): string;`<br/>**Returns:** string - A string representation of the World object. |
| `update(updateType, deltaTime)` | Called on every frame.<br/>**Signature:** `update(updateType: WorldUpdateType, deltaTime: number): undefined;`<br/>**Parameters:** updateType: WorldUpdateType - The type of update. deltaTime: number - The duration, in seconds, since the last frame.<br/>**Returns:** undefined |